---
layout: post
title: CakePHP - criando helpers
---

h1. {{ page.title }}

p(meta). 03 Outubro 2008 - Niterói/RJ

em muitos casos é necessario replicar o mesmo trecho de código nas views de um projeto. assim acaba-se criando uma repetição desnecessária de código. para resolver esse tipo de problema existem os helpers.<br /><br />helpers são componentes semelhante a classes que possuem métodos que executam alguma tarefa e devolvem um pedaço de código como resposta. esses métodos podem ser usados nas views de um projeto, evitando a repetição de código. o melhor benefício da centralizaçào de funcionalidades é facilitar a manutenção do código.<br /><br />o CakePHP facilita bastante o trabalho fornecendo vários helpers e permitindo que outros sejam criados rapidamente.<br /><br /><img src="http://farm4.static.flickr.com/3192/2776132553_3d0e797855.jpg" /><br /><small><a href="http://www.flickr.com/photos/slambo_42/2776132553/">18 tools and a hair</a>, por <a href="http://www.flickr.com/photos/slambo_42/">slambo_42</a>, sob a<a href="http://creativecommons.org/licenses/by-sa/2.0/deed.en">Creative Commons</a></small><br /><br />Criando um Helper<br /><br />um helper consiste em apenas um arquivo que fica na pasta /app/views/helpers/. apesar de estar na pasta das views (acho que deveria estar em outro lugar), o código do helper é formado por uma classe PHP que possui métodos que manipulam o que vc quiser e devolvem uma resposta para a view.<br /><br />como um exemplo, vamos criar um helper para resolver o seguinte problema: todas as páginas de um site precisam ter um certo banner, que não ficará no topo ou rodapé das páginas, mas em meio ao seu conteúdo. e a imagem desse banner poderá mudar às vezes. <br /><br />por mais que seja super simples fazer isso no próprio html, poderemos criar um helper que nos forneça o código desse banner. em todas as páginas que precisarmos dele usaremos o helper. caso haja alteração futura, simplesmente alteraremos o helper.<br /><br /><pre class="textmate-source"><span class="source source_php"><span class="source source_php source_php_embedded source_php_embedded_block source_php_embedded_block_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_begin punctuation_section_embedded_begin_php"><?php</span><br /><span class="comment comment_block comment_block_php"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_php">/*</span> /app/views/helpers/banner.php <span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_php">*/</span></span><br /><br /><span class="meta meta_class meta_class_php"><span class="storage storage_type storage_type_class storage_type_class_php">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_php">BannerHelper</span> <span class="storage storage_modifier storage_modifier_extends storage_modifier_extends_php">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_php">AppHelper</span> {</span><br /><span class="meta meta_function meta_function_php">    <span class="storage storage_type storage_type_function storage_type_function_php">function</span> <span class="entity entity_name entity_name_function entity_name_function_php">show</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_php">(</span>)</span> {<br />        <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>banner</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="string string_quoted string_quoted_double string_quoted_double_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_double meta_string-contents_quoted_double_php"><img src=<span class="constant constant_character constant_character_escape constant_character_escape_php">\\"</span>banner.png<span class="constant constant_character constant_character_escape constant_character_escape_php">\\"</span>></span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><br />        <span class="keyword keyword_control keyword_control_php">return</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>this</span><span class="keyword keyword_operator keyword_operator_class keyword_operator_class_php">-></span><span class="meta meta_function-call meta_function-call_object meta_function-call_object_php">output</span>(<span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>banner</span>)<span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />    }<br />}<br /><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_end punctuation_section_embedded_end_php"><span class="source source_php">?</span>></span></span></span><br /></pre><br />como vc pode ver, criamos um arquivo – /app/views/helpers/banner.php. uma classe que herda de AppHelper – class BannerHelper extends AppHelper. um método simples – show(). dentro desse método retornamos o resultado do método output(), que é responsável por passar os dados que receber para a view.<br /><br /><br />Usando o novo Helper<br /><br /><br />para usar o novo helper, declare-o no controller:<br /><br /><br /><pre class="textmate-source"><span class="source source_php"><span class="source source_php source_php_embedded source_php_embedded_block source_php_embedded_block_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_begin punctuation_section_embedded_begin_php"><?php</span><br /><span class="meta meta_class meta_class_php"><span class="storage storage_type storage_type_class storage_type_class_php">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_php">OneController</span> <span class="storage storage_modifier storage_modifier_extends storage_modifier_extends_php">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_php">AppController</span> {</span><br />    <span class="storage storage_type storage_type_php">var</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>helpers</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="meta meta_array meta_array_php"><span class="support support_function support_function_construct support_function_construct_php">array</span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_begin punctuation_definition_array_begin_php">(</span><span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php">BannerHelper</span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_end punctuation_definition_array_end_php">)</span></span><span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />    <span class="comment comment_line comment_line_double-slash comment_line_double-slash_php"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_php">//</span> ...<br /></span><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_end punctuation_section_embedded_end_php"><span class="source source_php">?</span>></span></span></span><br /></pre><br />na view é só chamar:<br /><br /><br /><pre class="textmate-source"><span class="source source_php"><span class="source source_php source_php_embedded source_php_embedded_block source_php_embedded_block_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_begin punctuation_section_embedded_begin_php"><?=</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>banner</span><span class="keyword keyword_operator keyword_operator_class keyword_operator_class_php">-></span><span class="meta meta_function-call meta_function-call_object meta_function-call_object_php">show</span>() <span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_end punctuation_section_embedded_end_php"><span class="source source_php">?</span>></span></span></span></pre><br />Aumentando as Possibilidades<br /><br /><br />dentro do helper que vc acabou de criar, é possível usar qualquer outro helper. basta declará-lo, assim como foi feito no controller do exemplo acima.<br /><br /><br />vamos incrementar o helper que acabamos de criar. acrescentaremos um link à imagem. pra isso usaremos o HtmlHelper do próprio cake.<br /><br /><br /><pre class="textmate-source"><span class="source source_php"><span class="source source_php source_php_embedded source_php_embedded_block source_php_embedded_block_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_begin punctuation_section_embedded_begin_php"><?php</span><br /><span class="comment comment_block comment_block_php"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_php">/*</span> /app/views/helpers/banner.php <span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_php">*/</span></span><br /><br /><span class="meta meta_class meta_class_php"><span class="storage storage_type storage_type_class storage_type_class_php">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_php">BannerHelper</span> <span class="storage storage_modifier storage_modifier_extends storage_modifier_extends_php">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_php">AppHelper</span> {</span><br /><br />    <span class="storage storage_type storage_type_php">var</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>helpers</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="meta meta_array meta_array_php"><span class="support support_function support_function_construct support_function_construct_php">array</span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_begin punctuation_definition_array_begin_php">(</span><span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php">Html</span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_end punctuation_definition_array_end_php">)</span></span><span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br /><br /><span class="meta meta_function meta_function_php">    <span class="storage storage_type storage_type_function storage_type_function_php">function</span> <span class="entity entity_name entity_name_function entity_name_function_php">show</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_php">(</span><span class="meta meta_function meta_function_arguments meta_function_arguments_php"><span class="meta meta_function meta_function_argument meta_function_argument_default meta_function_argument_default_php"><span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>class</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php">banner</span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span></span></span>)</span> {<br />        <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>image</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php"><img src="banner.png"></span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />        <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>url</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php">http://dx7lab.com</span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />        <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>link</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>this</span><span class="keyword keyword_operator keyword_operator_class keyword_operator_class_php">-></span><span class="variable variable_other variable_other_property variable_other_property_php">Html</span><span class="keyword keyword_operator keyword_operator_class keyword_operator_class_php">-></span><span class="meta meta_function-call meta_function-call_object meta_function-call_object_php">link</span>(<span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>image</span>, <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>url</span>, <span class="meta meta_array meta_array_php"><span class="support support_function support_function_construct support_function_construct_php">array</span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_begin punctuation_definition_array_begin_php">(</span><span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php">class</span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span> <span class="keyword keyword_operator keyword_operator_key keyword_operator_key_php">=></span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>class</span><span class="punctuation punctuation_definition punctuation_definition_array punctuation_definition_array_end punctuation_definition_array_end_php">)</span></span>)<span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />        <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>banner</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_php">=</span> <span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php"><div></span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span> <span class="keyword keyword_operator keyword_operator_string keyword_operator_string_php">.</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>link</span> <span class="keyword keyword_operator keyword_operator_string keyword_operator_string_php">.</span> <span class="string string_quoted string_quoted_single string_quoted_single_php"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_php">"</span><span class="meta meta_string-contents meta_string-contents_quoted meta_string-contents_quoted_single meta_string-contents_quoted_single_php"></div></span><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_php">"</span></span><span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br /><br />        <span class="keyword keyword_control keyword_control_php">return</span> <span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>this</span><span class="keyword keyword_operator keyword_operator_class keyword_operator_class_php">-></span><span class="meta meta_function-call meta_function-call_object meta_function-call_object_php">output</span>(<span class="variable variable_other variable_other_php"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_php">$</span>banner</span>)<span class="punctuation punctuation_terminator punctuation_terminator_expression punctuation_terminator_expression_php">;</span><br />    }<br />}<br /><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_end punctuation_section_embedded_end_php"><span class="source source_php">?</span>></span></span></span><br /></pre><br />agora o banner ficou mais completo com um código simples. temos o caminho da imagem e a url. usamos o HtmlHelper do Cake pra montarmos o link do banner. pra poder usar o HtmlHelper apenas o declaramos logo no início da classe. depois colocamos o banner dentro de uma div. além disso recebemos um parâmetro que será a classe css do link. depois retornamos tudo através do output.<br /><br /><br />essa técnica pode ajudar bastante na organização do código do projeto.<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/1372066769163881306-3603259478583168849?l=rafael.xlii.com.br' alt='' /></div>